mode: rule
log-level: info
external-controller: 127.0.0.1:9090
ipv6: false

dns:
  enable: true
  listen: 0.0.0.0:53
  ipv6: false
  default-nameserver:
  - 223.5.5.5
  - 223.6.6.6
  - 119.29.29.29
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  use-hosts: true
  respect-rules: true
  fake-ip-filter:
  - '+.lan'
  - '+.dnsapi.cn'
  - '+.stun.*.*'
  - '+.stun.*.*.*'
  - '+.stun.*.*.*.*'
  - '+.stun.*.*.*.*.*'
  - '*.n.n.srv.nintendo.net'
  - '+.stun.playstation.net'
  - 'xbox.*.*.microsoft.com'
  - '*.*.xboxlive.com'
  - '*.msftncsi.com'
  - '*.msftconnecttest.com'
  - 'apps.apple.com'
  - '+.thezion.club'
  nameserver-policy:
    'rule-set:thezion-proxy,gfw,apple,icloud,proxy':
    - 162.252.172.57
    - 149.154.159.92
  proxy-server-nameserver:
  - tls://dns.alidns.com
  - tls://dot.pub
  nameserver:
  - tls://dns.alidns.com
  - tls://dot.pub

proxies:

proxy-groups:
  - { name: "PROXY", type: select, proxies: [] }

rule-providers:
  thezion-direct:
    type: http
    url: 'https://raw.githubusercontent.com/thezion-club/thezion-clash-rules/refs/heads/main/thezion-direct.conf'
    proxy: PROXY
    behavior: classical
    interval: 900
  thezion-proxy:
    type: http
    url: 'https://raw.githubusercontent.com/thezion-club/thezion-clash-rules/refs/heads/main/thezion-proxy.conf'
    proxy: PROXY
    behavior: classical
    interval: 900
  gfw:
    type: http
    url: 'https://raw.githubusercontent.com/thezion-club/thezion-clash-rules/refs/heads/main/gfw.txt'
    proxy: PROXY
    behavior: domain
    interval: 900
  apple:
    type: http
    url: 'https://raw.githubusercontent.com/thezion-club/thezion-clash-rules/refs/heads/main/apple.txt'
    proxy: PROXY
    behavior: domain
    interval: 900
  icloud:
    type: http
    url: 'https://raw.githubusercontent.com/thezion-club/thezion-clash-rules/refs/heads/main/icloud.txt'
    proxy: PROXY
    behavior: domain
    interval: 900
  direct:
    type: http
    url: 'https://raw.githubusercontent.com/thezion-club/thezion-clash-rules/refs/heads/main/direct.txt'
    proxy: PROXY
    behavior: domain
    interval: 900
  private:
    type: http
    url: 'https://raw.githubusercontent.com/thezion-club/thezion-clash-rules/refs/heads/main/private.txt'
    proxy: PROXY
    behavior: domain
    interval: 900
  cncidr:
    type: http
    url: 'https://raw.githubusercontent.com/thezion-club/thezion-clash-rules/refs/heads/main/cncidr.txt'
    proxy: PROXY
    behavior: ipcidr
    interval: 900
  lancidr:
    type: http
    url: 'https://raw.githubusercontent.com/thezion-club/thezion-clash-rules/refs/heads/main/lancidr.txt'
    proxy: PROXY
    behavior: ipcidr
    interval: 900
  telegramcidr:
    type: http
    url: 'https://raw.githubusercontent.com/thezion-club/thezion-clash-rules/refs/heads/main/telegramcidr.txt'
    proxy: PROXY
    behavior: ipcidr
    interval: 900
  proxy:
    type: http
    url: 'https://raw.githubusercontent.com/thezion-club/thezion-clash-rules/refs/heads/main/proxy.txt'
    proxy: PROXY
    behavior: domain
    interval: 900

rules:
- IP-CIDR,162.252.172.57/32,PROXY,no-resolve
- IP-CIDR,149.154.159.92/32,PROXY,no-resolve
- RULE-SET,thezion-direct,DIRECT
- RULE-SET,thezion-proxy,PROXY
- RULE-SET,gfw,PROXY
- RULE-SET,apple,PROXY
- RULE-SET,icloud,PROXY
- RULE-SET,direct,DIRECT
- RULE-SET,private,DIRECT
- RULE-SET,cncidr,DIRECT
- RULE-SET,lancidr,DIRECT
- RULE-SET,telegramcidr,PROXY
- RULE-SET,proxy,PROXY
- GEOIP,CN,DIRECT
- MATCH,PROXY
